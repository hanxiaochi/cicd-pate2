# CICD工具快速安装指南

## 为什么需要这个指南？

本指南提供了一个快速、简单的方法来安装和启动CICD自动化部署工具，特别适合对技术不太熟悉的用户。本指南优先推荐使用Docker Compose方式部署，这是最简便且兼容性最好的方法。

## Docker Compose部署（推荐）

使用Docker Compose是部署此工具的最简单方法，适用于所有主流操作系统（Linux、Windows、MacOS）。

### 前提条件

- 已安装Docker和Docker Compose
- 服务器需要开放4567端口

### 部署步骤

1. **准备项目代码**：
   - 克隆仓库代码到本地或服务器：`git clone <仓库地址> .`
   - 或直接下载项目代码并解压

2. **启动服务**：
   - 打开终端，进入项目根目录
   - 执行命令：`docker-compose up -d`
   - 等待Docker镜像构建和容器启动完成

3. **访问系统**：
   - 打开浏览器，访问 `http://服务器IP:4567`
   - 使用默认账号登录：
     - 用户名：admin
     - 密码：admin123
     - **首次登录后请及时修改密码**

4. **停止和重启**：
   - 停止：`docker-compose down`
   - 重启：`docker-compose restart`
   - 更新后重建：`docker-compose up -d --build`

## 传统部署方式（仅作参考）

如果您因特殊原因需要在没有Docker的环境中安装，可以参考以下简化步骤：

### 前提条件

- Ruby 3.2或更高版本
- SQLite3数据库
- Git

### 安装步骤

1. **克隆项目代码**：
   ```bash
   mkdir -p /opt/cicd && cd /opt/cicd
git clone <仓库地址> .
   ```

2. **安装依赖**：
   ```bash
   # 安装bundler
gem install bundler

# 安装项目依赖
bundle install
   ```

3. **启动应用**：
   ```bash
   ruby app.rb
   ```

4. **访问系统**：
   - 打开浏览器，访问 `http://服务器IP:4567`
   - 使用默认账号登录

## 常见问题解决

### 问题1：Docker服务无法启动
**解决方法**：确认Docker服务是否已正确安装并启动，检查系统资源是否充足。

### 问题2：无法访问Web界面
**解决方法**：
- 检查服务器防火墙是否开放了4567端口
- 确认Docker容器是否正常运行：`docker-compose ps`
- 查看日志获取详细信息：`docker-compose logs -f`

### 问题3：中文显示乱码
**解决方法**：确保终端或浏览器使用UTF-8编码。

### 问题4：数据库连接错误
**解决方法**：Docker部署方式下，数据库会自动配置。传统部署方式下，确认SQLite3已正确安装。

## 注意事项

1. **数据持久化**：Docker部署方式下，数据库数据存储在Docker卷中，确保数据不会丢失
2. **安全防护**：在生产环境中，请配置防火墙规则，限制访问IP范围
3. **定期备份**：建议定期备份项目数据
4. **更新应用**：更新代码后，执行`docker-compose up -d --build`重新构建镜像

## 联系支持

如果您在安装过程中遇到任何问题，请参考主目录下的 `README.md` 文件，或联系技术支持获取帮助。